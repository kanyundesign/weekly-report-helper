# 设计团队周报助手 — 产品需求文档（PRD）

> **版本**：v1.0  
> **作者**：[evan]  
> **创建日期**：2024-12-15  
> **状态**：提案中

---

## 一、文档信息

|        | 内容                                 |
| :----- | :--------------------------------- |
| 产品名称   | 设计团队周报助手                           |
| 版本     | v1.0 (MVP)                         |
| 目标用户   | 设计团队成员（9人：8名设计师+1名管理者）             |
| 预计开发周期 | 2-3 天                              |
| 技术栈    | Next.js + Notion API + DeepSeek AI |

---

## 二、项目背景

### 2.1 现状与痛点

**当前周报流程：**
```
每周一下午 5 点周会前
    ↓
团队管理者手动创建周会文档模板副本
    ↓
修改周会文档的日期、标题等基础信息
    ↓
打开已创建的周报文档
    ↓
回忆上周做了什么（翻看板、翻聊天记录）
    ↓
手动编写周报内容
    ↓
填写到对应的个人部分
```

**核心痛点：**

| 痛点        | 描述                     | 影响            |
| :-------- | :--------------------- | :------------ |
| **管理负担重** | 管理者需要手动创建周报模板副本、修改基础信息 | 增加管理者工作量      |
| **效率低**   | 每人每周花 15-30 分钟写周报      | 团队每周浪费 2-4 小时 |
| **信息分散**  | 需要在看板、聊天记录中回忆          | 容易遗漏工作内容      |
| **格式不统一** | 每人写法不同                 | 汇总困难，可读性差     |
| **重复劳动**  | 看板已有进度信息，周报再写一遍        | 信息冗余          |
| **流程割裂**  | 模板创建和内容填写是两个独立环节       | 流程复杂，容易出错     |

### 2.2 机会洞察

**关键发现：**
> 设计师的工作进度已经在 Notion 看板中实时记录，但周报仍需手动编写——这是典型的「数据已有，但需要人工转换」的场景，非常适合 AI 自动化。

**解决思路：**
```
Notion 看板（已有数据）
    ↓
自动读取 + AI 整理
    ↓
生成标准化周报
    ↓
自动创建周报文档（包含日期、标题）
    ↓
写入完整周报内容到 Notion
```

---

## 三、产品定义

### 3.1 一句话描述

> **自动从 Notion 工作看板生成周报，让设计师专注设计，不再为写周报烦恼。同时探索用编程工具解决日常工作问题的可行性。**

### 3.2 产品目标

| 目标层级     | 目标       | 衡量指标      | 目标值                   |
| :------- | :------- | :-------- | :-------------------- |
| **核心目标** | **节省时间** | 单人周报编写时间  | 从 15 分钟 → 2 分钟内       |
| **核心目标** | **团队效率** | 团队总时间节省   | 100+ 分钟/周（10+min×9人）  |
| **产品目标** | **采用成功** | 团队使用率     | 全员使用                  |
| **产品目标** | **质量可用** | AI 生成可用性  | 比从零手写更快、更统一、更准确       |
| **探索目标** | **技术实践** | coding 学习 | 掌握 Notion API + AI 集成 |
| **探索目标** | **工作结合** | 应用价值      | 验证编程解决日常问题的可行性        |

### 3.3 核心价值

```
对设计师：
├── 不用再回忆「这周干了啥」
├── 不用手动整理格式
└── 只需确认和补充即可

对管理者：
├── 无需手动创建周报模板
├── 无需修改日期、标题等基础信息
└── 自动生成完整的团队周报文档

对团队：
├── 周报格式统一，便于汇总
├── 信息更完整，不会遗漏
└── 提升周会效率
```

---

## 四、用户分析

### 4.1 目标用户

| 角色      |  人数   | 职责          |
| :------ | :---: | :---------- |
| 设计团队管理者 |   1   | 创建周报模板、主持周会 |
| 视觉设计师   |   2   | 品牌视觉、运营设计   |
| UI 设计师  |   2   | 产品界面设计      |
| 内容设计师   |   2   | 文案、内容策划     |
| 动效设计师   |   2   | 动画、交互动效     |
| **合计**  | **9** |             |

### 4.2 用户场景

**主场景：周一下午生成周报**

```
时间：每周一下午 4:00（周会前 1 小时）
用户：设计团队成员（每人独立操作）

场景描述：
1. 设计师打开周报助手网页
2. 通过下拉菜单选择自己的名字
   └── 已提交的成员会显示「✓ 已提交」标记
3. 系统读取该设计师的任务数据，AI 生成周报预览
4. 设计师查看、编辑、补充内容
5. 确认无误后，点击「提交」
6. 系统立即将该设计师的周报写入 Notion 文档
7. 下拉菜单中该成员状态变为「已提交」
8. 周会时，管理者打开 Notion 查看完整团队周报
```

**使用模式：个人独立确认**

```
┌─────────────────────────────────────────────────────────────┐
│                      每人对自己的周报负责                     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  设计师 A ──► 选择自己 ──► 预览编辑 ──► 提交 ──► 写入 Notion │
│  设计师 B ──► 选择自己 ──► 预览编辑 ──► 提交 ──► 写入 Notion │
│  设计师 C ──► 选择自己 ──► 预览编辑 ──► 提交 ──► 写入 Notion │
│  ...                                                        │
│                                                             │
│  所有人的周报 ──► 汇总在同一个 Notion 页面                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 4.3 用户故事

| 角色  | 用户故事                                  | 优先级 |
| :-- | :------------------------------------ | :-: |
| 设计师 | 作为设计师，我希望通过下拉菜单选择自己，只看到自己的周报          | P0  |
| 设计师 | 作为设计师，我希望系统自动生成周报，以便我不用花时间回忆和整理       | P0  |
| 设计师 | 作为设计师，我希望预览周报后一键确认提交，流程简单快速          | P0  |
| 设计师 | 作为设计师，我希望能补充「信息同步/问题/学习分享」内容         | P0  |
| 设计师 | 作为设计师，我希望看到谁已提交、谁未提交，以便了解团队进度         | P1  |
| 管理者 | 作为管理者，我希望所有人的周报在同一页面，格式统一，便于汇总        | P1  |
| 管理者 | 作为管理者，我希望所有人的周报自动生成，不需要我来管理创建以及提升团队效率 | P0  |

---

## 五、功能需求

### 5.1 功能架构

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        设计团队周报助手                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                        数据读取模块                              │   │
│  │  • 连接 Notion API                                              │   │
│  │  • 读取工作看板数据（任务、状态、负责人）                        │   │
│  │  • 读取任务内容（子任务、进度信息）                              │   │
│  │  • 筛选最近 7 天有变动的任务                                     │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                              ↓                                          │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                        AI 处理模块                               │   │
│  │  • 按设计师分组                                                  │   │
│  │  • 按状态分类（上周进展 / 本周计划）                             │   │
│  │  • 提取进度信息                                                  │   │
│  │  • 生成周报文案                                                  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                              ↓                                          │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                        用户交互模块                              │   │
│  │  • 预览周报内容（只读）                                          │   │
│  │  • 填写信息同步/问题/学习分享（选填）                            │   │
│  │  • 确认提交                                                      │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                              ↓                                          │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                        输出模块                                  │   │
│  │  • 创建 Notion 周报页面                                          │   │
│  │  • 写入周报内容                                                  │   │
│  │  • 发送完成通知                                                  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 5.2 功能列表

| 功能        | 描述                | 优先级 | MVP |
| :-------- | :---------------- | :-: | :-: |
| **用户选择**  | 下拉菜单选择当前用户        | P0  |  ✅  |
| **提交状态**  | 显示每人的提交状态（已提交/未提交）| P0  |  ✅  |
| **数据读取**  | 从 Notion 看板读取任务数据 | P0  |  ✅  |
| **任务筛选**  | 筛选过去 7 天有变动的任务    | P0  |  ✅  |
| **进度计算**  | 根据子任务工时计算项目进度    | P0  |  ✅  |
| **AI 生成** | 根据数据生成周报文案        | P0  |  ✅  |
| **预览页面**  | 展示当前用户的周报供确认（只读）  | P0  |  ✅  |
| **信息同步输入** | 手动输入信息同步/问题/学习分享 | P0  |  ✅  |
| **提交功能**  | 确认后立即写入 Notion    | P0  |  ✅  |
| **降级方案**  | AI 失败时提供手动填写入口   | P0  |  ✅  |
| **定时触发**  | 每周一 16:00 自动生成    | P1  |  ⚪  |
| **历史查看**  | 查看历史周报            | P2  |  ⚪  |

### 5.3 功能详细说明

#### 功能 1：数据读取

**功能描述**：从 Notion 工作看板读取设计师的任务数据

**数据来源**：Design Task 2 看板

**读取字段**：

| 字段 | 类型 | 用途 |
|:---|:---|:---|
| 标题 | Title | 任务名称 |
| Status | Select | 任务状态（Next Up/In Progress/Review/Done） |
| Assignee | Person | 负责人 |
| Project | Select | 项目归属 |
| 任务类型 | Select | 分类 |
| 内容区域 | Blocks | 子任务、进度描述 |

**筛选逻辑**：

```
上周进展：
  last_edited_time >= 7天前
  AND Status in ['In Progress', 'Review', 'Done']

本周计划：
  Status = 'Next Up'
```

**日期范围说明**：

> 📅 周报范围统一为「过去 7 天」，而非固定的「周一~周五」。
> 
> **原因**：存在放假调休的情况，周六周日可能有补班，「过去 7 天」能更好地覆盖全场景。

**无任务情况处理**：

| 场景 | 处理方式 |
|:---|:---|
| 该成员过去 7 天无任务变动 | 显示「暂无工作记录」 |
| 用户需要补充特殊情况（如请假） | 可在 Notion 中手动添加 |

---

#### 功能 2：AI 生成周报

**功能描述**：根据读取的数据，使用 AI 生成格式化的周报，**自动计算项目进度**

**输入**：
```json
{
  "assignee": "yifan",
  "tasks": [
    {
      "title": "项目测试-年会",
      "status": "In Progress",
      "project": "Paraflow",
      "content": [
        "1、设计沟通 0.5pd ✅",
        "2、草稿及确认 2pd ✅",
        "3、设计初稿 3pd ✅",
        "4、方案讨论与修改 1pd",
        "5、定稿输出 0.5pd"
      ]
    }
  ]
}
```

**进度计算逻辑**：

```
1. 解析子任务中的工时（如 0.5pd、2pd）
2. 识别已完成的子任务（带 ✅ 标记）
3. 计算进度 = 已完成工时 / 总工时

示例：
总工时 = 0.5 + 2 + 3 + 1 + 0.5 = 7pd
已完成 = 0.5 + 2 + 3 = 5.5pd（带 ✅ 的子任务）
进度 = 5.5 / 7 = 78.6% ≈ 79%
```

**输出**：
```markdown
### 1. 上周进展

a. 项目测试-年会 — 79%
   i. 设计沟通 ✅
   ii. 草稿及确认 ✅
   iii. 设计初稿 ✅
   iv. 方案讨论与修改
   v. 定稿输出

### 2. 本周计划

a. [Next Up 中的任务]

### 3. 信息同步/问题暴露/学习分享

a. 暂无
```

**进度显示规则**：

| 场景 | 显示 |
|:---|:---|
| 正常计算 | `项目名 — XX%` |
| 无法计算（缺少工时） | `项目名`（不显示进度） |
| 已完成（Status = Done） | `项目名 ✅` |

---

#### 功能 3：用户选择与提交状态

**功能描述**：用户通过下拉菜单选择自己，查看个人周报

**下拉菜单设计**：

```
┌─────────────────────────────────┐
│  选择你的名字          ▼        │
├─────────────────────────────────┤
│  👤 yifan                       │  ← 未提交（默认样式）
│  ✅ wujinjin（已提交）           │  ← 已提交（绿色 + 标记）
│  👤 xiaoming                    │
│  ✅ lily（已提交）               │
│  👤 zhangsan                    │
│  ...                            │
└─────────────────────────────────┘
```

**状态区分**：

| 状态 | 显示样式 | 说明 |
|:---|:---|:---|
| 未提交 | `👤 名字` | 默认样式，可点击生成周报 |
| 已提交 | `✅ 名字（已提交）` | 绿色标记，点击可查看（只读） |

---

#### 功能 4：预览与确认

**功能描述**：用户选择自己后，查看 AI 生成的个人周报（只读），填写补充信息后提交

**页面布局**：

```
┌─────────────────────────────────────────────────────────────────────────┐
│  🗓️ 设计团队周报助手                                                    │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  选择成员：[ yifan                    ▼ ]      周报范围：12/9 ~ 12/15    │
│           ┌──────────────────────────┐                                  │
│           │ 👤 yifan                 │                                  │
│           │ ✅ wujinjin（已提交）     │                                  │
│           │ 👤 xiaoming              │                                  │
│           └──────────────────────────┘                                  │
│                                                                         │
│  ─────────────────────────────────────────────────────────────────────  │
│                                                                         │
│  👤 yifan 的周报                                                        │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  ## 1. 上周进展                       ← AI 自动生成（只读）      │   │
│  │     a. 项目测试-年会 — 79%            ← 自动计算进度             │   │
│  │        i. 设计沟通 ✅                                           │   │
│  │        ii. 草稿及确认 ✅                                        │   │
│  │        iii. 设计初稿 ✅                                         │   │
│  │        iv. 方案讨论与修改                                       │   │
│  │        v. 定稿输出                                              │   │
│  │                                                                 │   │
│  │  ## 2. 本周计划                       ← AI 自动生成（只读）      │   │
│  │     a. 下一个项目任务                                           │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ─────────────────────────────────────────────────────────────────────  │
│                                                                         │
│  📝 信息同步 / 问题暴露 / 学习分享（选填）                              │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                                                                 │   │
│  │  在此输入你想同步的信息、遇到的问题或学习心得...                 │   │
│  │                                                                 │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│  💡 此项为选填，留空则显示「暂无」                                      │
│                                                                         │
│  ─────────────────────────────────────────────────────────────────────  │
│                                                                         │
│                                              [确认并提交到 Notion]       │
│                                                                         │
│  💡 提交后将立即写入 Notion，如需修改请前往 Notion 文档                  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

**页面区域说明**：

| 区域             | 来源                 | 可编辑 |
| :------------- | :----------------- | :-: |
| 上周进展           | AI 从 Notion 看板自动生成 |  ❌ 只读  |
| 本周计划           | AI 从 Notion 看板自动生成 |  ❌ 只读  |
| 信息同步/问题暴露/学习分享 | 用户手动输入             |  ✅ 可输入  |

> 📝 AI 生成的「上周进展」和「本周计划」为 **只读**，不支持在应用中修改。如需调整，提交后请前往 Notion 文档修改。
> 
> 📝 「信息同步/问题暴露/学习分享」需要用户手动填写。如未填写，周报中显示「暂无」。

**交互说明**：

| 操作 | 结果 |
|:---|:---|
| 选择未提交的成员 | 生成该成员的周报预览（只读） |
| 选择已提交的成员 | 显示已提交的内容（只读） |
| 填写「信息同步」输入框 | 内容将合并到周报第三部分 |
| 点击「确认并提交」 | 立即写入 Notion，状态变为「已提交」 |

**设计原因**：

> ⚡ **为什么 AI 生成内容不可编辑？**
> 
> 1. **简化应用复杂度** — 减少开发工作量，聚焦核心功能
> 2. **保证数据一致性** — AI 内容来自看板，修改后可能与看板数据不一致
> 3. **降低操作成本** — 减少用户决策负担，快速确认提交
> 4. **Notion 兜底** — 如需修改，可在 Notion 中直接编辑，保留完整编辑能力

---

#### 功能 5：提交到 Notion（预创建 + 更新模式）

**功能描述**：用户确认后，立即将个人周报写入 Notion 周报目录，**顺序固定**

**核心设计**：
- 第一个人提交时，创建完整页面结构（预留所有人的位置）
- 后续提交时，更新对应位置的内容
- 无论谁先提交，最终顺序都按固定成员列表排列

**成员固定顺序**（可配置）：

```javascript
const MEMBER_ORDER = [
  "成员1",
  "成员2", 
  "成员3",
  "成员4",
  "成员5",
  "成员6",
  "成员7",
  "成员8"
];
```

**写入逻辑**：

```
用户点击「确认并提交」
    ↓
检查周报页面是否存在
    ├── 不存在 → 创建新页面 + 预创建所有人的占位区域
    └── 已存在 → 定位到该用户的区域
    ↓
更新该用户区域的内容（替换占位符）
    ↓
更新本地提交状态
    ↓
下拉菜单显示「✅ 已提交」
```

**输出位置**：周报目录下的当周页面

**页面命名**：`2024-12-16`（当周周一日期）

**页面结构**（预创建所有人位置）：

```markdown
# 设计团队周报（12/9 ~ 12/13）

---

## 成员1                          ← 位置 1（固定）

### 1. 上周进展
a. 集团工牌需求 -90%
   i. 需求沟通会 ✅
   ii. 概念稿 ✅

### 2. 本周计划
a. Paraflow 登录页优化

### 3. 信息同步/问题暴露/学习分享
a. 暂无

---

## 成员2                          ← 位置 2（固定）

（待提交）                        ← 未提交时显示占位符

---

## 成员3                          ← 位置 3（固定）

### 1. 上周进展
...                              ← 已提交，显示内容

---

（按固定顺序排列所有 8 人）
```

**写入场景说明**：

| 场景 | 处理方式 |
|:---|:---|
| 当周首个提交 | 创建新页面 + 预创建所有人占位区域 + 填充该用户内容 |
| 后续提交 | 定位到该用户的占位区域，替换为实际内容 |
| 重复提交 | 提示「已提交」，显示只读内容（不可重复提交） |

**提交后修改策略**：

> ⚠️ **不支持在应用中撤回或重新提交**
> 
> 如果提交后发现内容有误或遗漏，请直接进入 **Notion 周报文档** 中手动修改。
> 
> **设计原因**：
> - 简化应用复杂度
> - 避免重复提交导致的数据混乱
> - Notion 本身支持版本历史，可追溯修改记录

**占位符设计**：

```markdown
## 成员名

（待提交）
```

> 💡 这样无论谁先提交，周报文档中的顺序始终保持一致，便于周会时按顺序查看。

---

## 六、数据设计

### 6.1 数据流

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           个人提交模式数据流                                 │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  Notion 工作看板              应用                     Notion 周报目录       │
│        │                       │                            │               │
│        │  1. 用户选择自己      │                            │               │
│        │                       │                            │               │
│        │  2. 读取该用户任务    │                            │               │
│        │ ◄──────────────────── │                            │               │
│        │                       │                            │               │
│        │  返回：任务列表       │                            │               │
│        │ ────────────────────► │                            │               │
│        │                       │                            │               │
│        │                       │  3. AI 生成个人周报        │               │
│        │                       │                            │               │
│        │                       │  4. 用户预览/编辑          │               │
│        │                       │                            │               │
│        │                       │  5. 用户确认提交           │               │
│        │                       │ ───────────────────────────►               │
│        │                       │     立即写入该用户内容      │               │
│        │                       │                            │               │
│        │                       │  6. 更新本地提交状态       │               │
│        │                       │                            │               │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 6.2 数据字段映射

| Notion 字段 | 应用字段 | 说明 |
|:---|:---|:---|
| Title | title | 任务标题 |
| Status | status | 任务状态 |
| Assignee | assignee | 负责人（用于分组） |
| Project | project | 项目（可选，用于二次分组） |
| Page Content | content | 任务详情（子任务、进度） |
| last_edited_time | lastEdited | 最后编辑时间（用于筛选） |

### 6.3 成员顺序配置

**配置文件**：`config/members.json`

```json
{
  "members": [
    { "id": "member1", "name": "成员1", "notionUserId": "xxx" },
    { "id": "member2", "name": "成员2", "notionUserId": "xxx" },
    { "id": "member3", "name": "成员3", "notionUserId": "xxx" },
    { "id": "member4", "name": "成员4", "notionUserId": "xxx" },
    { "id": "member5", "name": "成员5", "notionUserId": "xxx" },
    { "id": "member6", "name": "成员6", "notionUserId": "xxx" },
    { "id": "member7", "name": "成员7", "notionUserId": "xxx" },
    { "id": "member8", "name": "成员8", "notionUserId": "xxx" }
  ]
}
```

> 💡 成员顺序在此配置文件中定义，周报文档将按此顺序排列

### 6.4 提交状态存储

**存储方式**：本地 JSON 文件（轻量方案）

**文件路径**：`data/submissions.json`

```json
{
  "weekOf": "2024-12-16",
  "pageId": "notion-page-id-xxx",
  "memberBlocks": {
    "member1": { "blockId": "block-id-1" },
    "member2": { "blockId": "block-id-2" },
    "member3": { "blockId": "block-id-3" }
  },
  "submissions": {
    "member1": { "submitted": true, "time": "2024-12-16T08:30:00Z" },
    "member2": { "submitted": true, "time": "2024-12-16T08:45:00Z" },
    "member3": { "submitted": false }
  }
}
```

**字段说明**：

| 字段 | 用途 |
|:---|:---|
| `weekOf` | 当前周的周一日期 |
| `pageId` | Notion 周报页面 ID |
| `memberBlocks` | 每个成员在 Notion 中的区块 ID（用于定位更新） |
| `submissions` | 每个成员的提交状态和时间 |

**状态重置**：每周一自动清空，开始新一周的提交追踪

---

## 七、技术方案

### 7.1 技术架构

```
┌─────────────────────────────────────────────────────────────┐
│                        技术架构                              │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  前端                    后端 API              外部服务      │
│  ┌───────────┐         ┌───────────┐       ┌───────────┐   │
│  │ Next.js   │ ──────► │ API Routes│ ────► │ Notion API│   │
│  │ React     │         │           │       │           │   │
│  │ Tailwind  │         │           │ ────► │ DeepSeek  │   │
│  └───────────┘         └───────────┘       │ AI        │   │
│                                            └───────────┘   │
│                                                             │
│  部署：Vercel                                               │
│  定时任务：Vercel Cron                                       │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 7.2 技术选型

| 组件 | 选择 | 原因 |
|:---|:---|:---|
| 框架 | Next.js 14 | 全栈开发，API Routes 支持 |
| UI | Tailwind CSS | 快速开发，美观 |
| Notion SDK | @notionhq/client | 官方支持，稳定 |
| AI | DeepSeek API | 成本低，中文能力强 |
| 部署 | Vercel | 免费，支持 Cron Job |

### 7.3 核心 API

| API | 方法 | 描述 |
|:---|:---|:---|
| `/api/members` | GET | 获取成员列表及提交状态 |
| `/api/tasks` | GET | 获取指定成员的 Notion 看板任务数据 |
| `/api/generate` | POST | 调用 AI 为指定成员生成周报 |
| `/api/submit` | POST | 提交指定成员的周报到 Notion |

**API 详细说明**：

```
GET /api/members
返回：
{
  "weekOf": "2024-12-16",
  "members": [
    { "id": "yifan", "name": "yifan", "submitted": false },
    { "id": "wujinjin", "name": "wujinjin", "submitted": true },
    ...
  ]
}

GET /api/tasks?member=yifan
返回：该成员的任务数据

POST /api/generate
Body: { "member": "yifan", "tasks": [...] }
返回：AI 生成的周报内容

POST /api/submit
Body: { "member": "yifan", "content": "..." }
返回：{ "success": true, "pageId": "xxx" }
```

---

## 八、开发计划

### 8.1 里程碑

| 阶段 | 内容 | 时间 | 交付物 |
|:---|:---|:---|:---|
| **Phase 1** | 数据读取 | 0.5 天 | Notion API 连通，数据获取成功 |
| **Phase 2** | AI 生成 | 0.5 天 | 周报文案生成功能 |
| **Phase 3** | 前端界面 | 1 天 | 预览、编辑、确认页面 |
| **Phase 4** | 提交功能 | 0.5 天 | 写入 Notion 功能 |
| **Phase 5** | 测试部署 | 0.5 天 | 上线运行 |

### 8.2 详细任务

| 任务 | 描述 | 预估时间 |
|:---|:---|:---|
| 项目初始化 | 创建 Next.js 项目，配置环境 | 1h |
| Notion API 集成 | 连接 Notion，读取看板数据 | 2h |
| 成员列表与状态 | 获取成员、管理提交状态 | 1h |
| 数据处理 | 按成员筛选、分组、格式化 | 2h |
| AI 集成 | 接入 DeepSeek，生成周报 | 2h |
| 前端页面 | 下拉选择、预览、编辑界面 | 4h |
| 提交状态 UI | 已提交/未提交的视觉区分 | 1h |
| 提交功能 | 单人提交，立即写入 Notion | 2h |
| 测试 | 功能测试、边界测试 | 2h |
| 部署 | Vercel 部署 | 1h |
| **合计** | | **约 18h（2-3天）** |

---

## 九、风险评估

### 9.1 产品风险评估

| 风险类型 | 风险 | 可能性 | 影响 | 应对措施 |
|:---|:---|:---:|:---:|:---|
| **采用风险** | 用户觉得"还不如手写快" | 中 | 高 | 重点优化AI质量，支持快速编辑 |
| **技术风险** | AI 生成质量不稳定 | 中 | 中 | 优化 Prompt，提供降级方案 |
| **技术风险** | Notion API 权限问题 | 低 | 高 | 已完成 Integration 配置 |
| **数据风险** | 任务数据不完整/缺失 | 中 | 中 | 提示用户补充，支持手动编辑 |
| **操作风险** | 误选他人名字提交 | 低 | 中 | 提交前二次确认 |
| **习惯风险** | 用几次就不用了 | 中 | 高 | 分阶段推广，持续优化体验 |
| **时间风险** | 开发时间超出预期 | 低 | 中 | 控制功能范围，聚焦MVP |
| **网络风险** | 网络请求失败 | 低 | 中 | 错误处理，重试机制 |

### 9.2 项目失败风险与应对

#### 最大风险：用户采用失败

**风险描述**：开发完成后，团队成员试用几次就放弃使用

**失败场景**：
- AI 生成内容质量差，需要大量修改
- 使用流程比手写更复杂
- 技术问题频繁，用户失去信心
- 第一印象不好，形成负面口碑

**应对策略**：
1. **MVP前验证**：与2-3个同事深度访谈，确认需求真实性
2. **质量优先**：重点投入AI Prompt优化，确保生成质量
3. **简化流程**：宁可功能简单，也要操作流畅
4. **快速迭代**：收集反馈后24小时内修复问题
5. **降级备案**：准备完整的手动填写方案

#### 技术探索价值保护

**核心原则**：即使产品失败，技术学习价值也要实现

**保护措施**：
- 详细记录开发过程和遇到的问题
- 整理 Notion API 和 AI 集成的技术文档
- 总结"编程解决日常问题"的经验和教训
- 为后续类似项目积累可复用的代码和方法

### 9.3 AI 生成失败降级方案

**触发条件**：AI 接口调用失败（超时、报错等）

**处理流程**：

```
AI 生成请求
    ↓
失败 → 显示错误提示「生成失败，请重试」
    ↓
用户点击「重试」
    ↓
再次失败（连续 3 次）
    ↓
触发降级方案
```

**降级方案内容**：

```
┌─────────────────────────────────────────────────────────────────────────┐
│  ⚠️ AI 生成暂时不可用                                                   │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  很抱歉，AI 服务当前不可用。你可以：                                     │
│                                                                         │
│  1. 稍后再试                                                            │
│                                                                         │
│  2. 手动填写周报：                                                       │
│     👉 点击进入本周周报文档                                              │
│        [打开 Notion 周报页面]  ← 链接按钮                                │
│                                                                         │
│  你的任务数据（供参考）：                                                │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  • 集团工牌需求（Review）                                       │   │
│  │  • 独立站官网（Done）                                           │   │
│  │  • Paraflow 登录页优化（Next Up）                               │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

**降级方案说明**：

| 元素 | 说明 |
|:---|:---|
| 错误提示 | 友好告知用户 AI 暂不可用 |
| Notion 链接 | 提供当周周报文档的直接链接，用户可手动填写 |
| 原始任务数据 | 展示从 Notion 读取的任务列表（未经 AI 整理），供用户参考 |

---

## 十、成功指标

### 10.1 主要成功指标（产品价值）

| 指标类型 | 指标 | 目标值 | 衡量方式 |
|:---|:---|:---|:---|
| **效率成功** | 单人周报时间 | 从 15min → 5min 内 | 计时对比 |
| **效率成功** | 团队时间节省 | 90min/周（10min×9人） | 累计统计 |
| **采用成功** | 试用阶段采用率 | 2-3人试用2周，反馈积极 | 试用反馈 |
| **采用成功** | 团队使用率 | > 70%（9人中7人使用） | 使用统计 |
| **采用成功** | 持续使用率 | 连续4周使用率不下降 | 行为追踪 |
| **质量成功** | AI 有用性 | 比"从零开始写"更快 | 用户反馈 |
| **质量成功** | 技术稳定性 | 故障 < 1次/周 | 错误监控 |
| **体验成功** | 用户满意度 | 满意度 > 4/5分 | 简单评分 |

### 10.2 次要成功指标（学习价值）

| 指标类型 | 指标 | 目标值 | 衡量方式 |
|:---|:---|:---|:---|
| **技术探索** | 开发完成度 | 按时完成MVP功能 | 项目进度 |
| **技术探索** | 技能提升 | 掌握 Notion API + AI 集成 | 自我评估 |
| **工作结合** | 应用验证 | 验证编程解决日常问题可行性 | 项目总结 |
| **团队影响** | 影响力 | 其他人对"编程解决工作问题"产生兴趣 | 观察反馈 |

### 10.3 失败条件（明确退出标准）

#### 硬失败（立即停止）
- 连续使用1周后，所有试用者都反馈"不如手写快"
- 技术问题导致无法正常使用超过3天
- 开发时间严重超出预期（>1周）

#### 软失败（调整或放弃）
- 试用2周后，使用率 < 30%
- 单人平均耗时没有明显改善（仍需 >10min）
- AI 生成质量过差，需要大量修改（编辑率 >50%）

### 10.4 分阶段验证计划

#### Phase 0：MVP验证（2-3人，2周）
**目标**：验证基本可行性
- **参与者**：evan + 2个同事试用
- **重点验证**：AI质量、使用流程、技术稳定性
- **成功标准**：试用者愿意继续使用，反馈积极
- **数据收集**：使用时间、编辑频率、问题反馈

#### Phase 1：团队推广（全团队，4周）
**目标**：验证规模化效果
- **参与者**：全团队9人使用
- **重点验证**：采用率、时间节省、问题频率
- **成功标准**：使用率 > 70%，平均时间节省 > 50%
- **数据收集**：使用率统计、时间对比、满意度调研

#### Phase 2：稳定运行（长期）
**目标**：成为日常工具
- **参与者**：持续使用的团队成员
- **重点验证**：长期采用、持续改进、技术稳定
- **成功标准**：成为团队标准周报流程
- **数据收集**：长期使用数据、优化建议

---

## 十一、后续规划

| 版本 | 功能 | 优先级 |
|:---|:---|:---:|
| v1.1 | 定时自动生成（每周一 16:00） | P1 |
| v1.2 | 飞书/钉钉通知 | P2 |
| v1.3 | 历史周报查看 | P2 |
| v2.0 | 团队数据统计看板 | P3 |

---

## 附录

### A. Notion 卡片书写规范（重要）

> ⚠️ **为确保 AI 能正确计算项目进度，请按以下规范填写任务卡片**

#### 子任务格式

**标准格式**：`序号、任务名 工时 状态标记`

```markdown
✅ 规范示例：
1、设计沟通 0.5pd ✅
2、草稿及确认 2pd ✅
3、设计初稿 3pd ✅
4、方案讨论与修改 1pd
5、定稿输出 0.5pd

❌ 避免：
1、设计沟通 ✅           ← 缺少工时，无法计算进度
2、草稿及确认             ← 缺少工时和状态
设计初稿 3pd ✅          ← 缺少序号
```

#### 工时单位

| 单位 | 含义 | 示例 |
|:---|:---|:---|
| `pd` | 人天（person-day） | `2pd` = 2天 |
| `h` | 小时 | `4h` = 4小时 |

> 💡 推荐使用 `pd`，与设计排期单位一致

#### 状态标记

| 标记 | 含义 | 用法 |
|:---|:---|:---|
| `✅` | 已完成 | 子任务完成后添加 |
| 无标记 | 未完成/进行中 | 默认状态 |

#### 完整卡片示例

```
标题：项目测试-年会
Project：Paraflow
Status：In Progress
设计排期：2025/12/17 → 2025/12/25
Assignee：yifan

内容区域：
1、设计沟通 0.5pd ✅
2、草稿及确认 2pd ✅
3、设计初稿 3pd ✅
4、方案讨论与修改 1pd
5、定稿输出 0.5pd
```

**AI 计算结果**：
```
总工时 = 0.5 + 2 + 3 + 1 + 0.5 = 7pd
已完成 = 0.5 + 2 + 3 = 5.5pd
进度 = 5.5 / 7 = 79%

周报显示：项目测试-年会 — 79%
```

---

### B. 周报模板

```markdown
### 1. 上周进展

a. [项目名] — [进度%]
   i. [子任务1] ✅
   ii. [子任务2] ✅
   iii. [子任务3]

### 2. 本周计划

a. [计划任务]
b. [计划任务]

### 3. 信息同步/问题暴露/学习分享

a. [内容，如无则填「暂无」]
```

---

### C. 进度显示规则

| 场景 | 周报显示 | 说明 |
|:---|:---|:---|
| 正常计算 | `项目名 — 79%` | 已完成工时/总工时 |
| 子任务无工时 | `项目名` | 无法计算，不显示进度 |
| 任务已完成 | `项目名 ✅` | Status = Done |
| 任务未开始 | `项目名`（本周计划） | Status = Next Up |

---

### D. 相关资源

| 资源 | 链接 |
|:---|:---|
| Notion 工作看板 | Design Task 2 |
| Notion 周报目录 | [周报目录] |
| Notion API 文档 | https://developers.notion.com/ |
| DeepSeek API | https://platform.deepseek.com/ |

---

**文档版本**：v1.0  
**最后更新**：2024-12-15
